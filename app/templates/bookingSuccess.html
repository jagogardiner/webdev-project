<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<!-- CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
			crossorigin="anonymous"
		/>
		<link href="../static/css/style.css" rel="stylesheet" />

		<title>Success! - Horizon Hotels</title>
	</head>

	<body>
		<div id="header"></div>

		<main role="main">
			<div class="container">
				<p class="h5">Thanks for booking with Horizon Hotels!</p>
				<p class="h6">
					You are staying at: {{ hotel.city }}, from {{ booking.start_date }} to
					{{ booking.end_date }}.
				</p>
				<p class="h6">
					When you arrive at reception, please bring valid ID and quote the
					booking reference: #{{ booking.booking_reference}}
				</p>
				<p id="totalPaid"></p>
				<p id="roomPricePerNight"></p>
				<p id="roomPriceTotal"></p>
				<p id="roomPriceDiscount"></p>
				<p id="priceTotal" class="h5"></p>
			</div>
		</main>

		<div id="footer"></div>

		<!-- jQuery CDN-->
		<script
			src="https://code.jquery.com/jquery-3.6.0.min.js"
			integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
			crossorigin="anonymous"
		></script>

		<!-- Render header footer template -->
		<script src="../static/js/tools.js"></script>

		<!-- Booking success functions -->
		<script src="../static/js/successbooking.js"></script>

		<!-- Bootstrap CDN -->
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
			crossorigin="anonymous"
		></script>

		<!-- Load header and footer -->
		<script>
			loadTemplate();
			let costs = calculateBookingCosts(
				parseFloat('{{ booking.price_pn }}'),
				parseFloat('{{ booking.price_pn }}'),
				'{{ booking.start_date }}',
				'{{ booking.end_date }}',
				'{{ booking.room_type }}',
				new Date('{{ booking.transaction_date }}'),
			);
			console.log(costs);
			if (costs.nights == 1) {
				$('#roomPriceTotal').text(
					costs.nights + ' night: £' + parseInt(costs.roomTotal).toFixed(2),
				);
			} else {
				$('#roomPriceTotal').text(
					costs.nights + ' nights: £' + parseInt(costs.roomTotal).toFixed(2),
				);
			}
			$('#roomPriceDiscount').text(
				'Advance booking discount: -£' + costs.discount.toFixed(2),
			);
			$('#roomPricePerNight').text(
				'Room price: £' + costs.pricePn.toFixed(2) + ' p/n',
			);
			$('#priceTotal').text(
				'Full total: £' + parseFloat(costs.totalCost).toFixed(2),
			);
		</script>
	</body>
</html>
